<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trang Web Với Khung Hình</title>
    <!-- Load Tailwind CSS CDN for easy styling -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Ensure minimum body height for vertical centering */
        body {
            min-height: 100vh;
            display: flex; /* Use flexbox to center content */
            justify-content: center; /* Center horizontally */
            align-items: center; /* Center vertically */
            background-color: #f0f4f8; /* Light background color for the page */
            font-family: 'Inter', sans-serif; /* Use Inter font */
        }
        /* Import Inter font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');

        /* Custom style for active mini-box (glowing effect) */
        .animated-minibox {
            /* Add transition for smooth color and shadow changes */
            transition: background-color 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
            background-color: transparent; /* Transparent background when off */
            border: 3px solid #f87171; /* Light red border when off, increased to 3px */
        }
        .animated-minibox.active {
            background-color: #dc2626; /* Red color for active LED */
            box-shadow: 0 0 8px 4px rgba(220, 38, 38, 0.7); /* Glow effect, updated to red */
            border-color: #dc2626; /* Solid red border when active */
        }

        /* Styles for 7-segment display */
        .segment {
            background-color: #333; /* Off color for segments */
            border-radius: 2px; /* Slightly rounded corners for segments */
            transition: background-color 0.1s ease-in-out; /* Smooth transition for color change */
        }
        .segment.on {
            background-color: #dc2626; /* Red color when active, updated from yellow */
        }
        .seven-segment-digit {
            position: relative;
            width: 30px; /* Width of a single digit, slightly smaller for betbox */
            height: 40px; /* Height of a single digit, slightly smaller for betbox */
            margin: 0 1px; /* Small margin between digits */
        }
        /* Segment positioning within a 30x40px digit for betbox */
        .seven-segment-digit .segment {
            position: absolute;
        }
        /* Segment positions for all digits */
        /* For 7-segment digits in scoreboxes (larger) */
        #digit-1-a, #digit-2-a, #digit-3-a, #digit-4-a, #digit-5-a,
        #digit-6-a, #digit-7-a, #digit-8-a, #digit-9-a, #digit-10-a { width: 25px; height: 5px; top: 0; left: 5px; }
        #digit-1-b, #digit-2-b, #digit-3-b, #digit-4-b, #digit-5-b,
        #digit-6-b, #digit-7-b, #digit-8-b, #digit-9-b, #digit-10-b { width: 5px; height: 15px; top: 5px; right: 0; }
        #digit-1-c, #digit-2-c, #digit-3-c, #digit-4-c, #digit-5-c,
        #digit-6-c, #digit-7-c, #digit-8-c, #digit-9-c, #digit-10-c { width: 5px; height: 15px; top: 25px; right: 0; }
        #digit-1-d, #digit-2-d, #digit-3-d, #digit-4-d, #digit-5-d,
        #digit-6-d, #digit-7-d, #digit-8-d, #digit-9-d, #digit-10-d { width: 25px; height: 5px; bottom: 0; left: 5px; }
        #digit-1-e, #digit-2-e, #digit-3-e, #digit-4-e, #digit-5-e,
        #digit-6-e, #digit-7-e, #digit-8-e, #digit-9-e, #digit-10-e { width: 5px; height: 15px; top: 25px; left: 0; }
        #digit-1-f, #digit-2-f, #digit-3-f, #digit-4-f, #digit-5-f,
        #digit-6-f, #digit-7-f, #digit-8-f, #digit-9-f, #digit-10-f { width: 5px; height: 15px; top: 5px; left: 0; }
        #digit-1-g, #digit-2-g, #digit-3-g, #digit-4-g, #digit-5-g,
        #digit-6-g, #digit-7-g, #digit-8-g, #digit-9-g, #digit-10-g { width: 25px; height: 5px; top: 20px; left: 5px; }

        /* For 7-segment digits in betboxes (smaller) */
        .betbox .seven-segment-digit {
            width: 25px; /* Smaller width for betbox digits */
            height: 35px; /* Smaller height for betbox digits */
        }
        .betbox .segment {
            background-color: #333;
            border-radius: 1px;
        }
        .betbox .segment.on {
            background-color: #dc2626; /* Red color when active, updated from yellow */
        }
        /* Segment positions for digits 11-26 (within 25x35px digit) */
        [id^="digit-"][id$="-a"] { width: 18px; height: 4px; top: 0; left: 3px; }
        [id^="digit-"][id$="-b"] { width: 4px; height: 11px; top: 4px; right: 0; }
        [id^="digit-"][id$="-c"] { width: 4px; height: 11px; top: 20px; right: 0; }
        [id^="digit-"][id$="-d"] { width: 18px; height: 4px; bottom: 0; left: 3px; }
        [id^="digit-"][id$="-e"] { width: 4px; height: 11px; top: 20px; left: 0; }
        [id^="digit-"][id$="-f"] { width: 4px; height: 11px; top: 4px; left: 0; }
        [id^="digit-"][id$="-g"] { width: 18px; height: 4px; top: 17px; left: 3px; }

        /* Style for images inside content boxes (imgbox and perimeter boxes) */
        .imgbox img, .content-box img {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ensures the image covers the area without distortion */
            border-radius: 6px; /* Match parent's rounded corners */
        }
    </style>
</head>
<body class="p-4">
    <!-- Main container box -->
    <div class="
        bg-white
        rounded-xl
        shadow-xl
        p-6
        flex
        flex-col
        items-center
        border
        border-gray-200
        max-w-full
        max-h-full
        relative /* Add relative for positioning inner boxes */
    " style="width: 650px; height: 1000px;">
        <!-- Scorebox 1 (right) -->
        <div class="absolute bg-gray-100 rounded-lg shadow-md border-4 border-gray-400 flex items-center justify-center"
             style="width: 200px; height: 50px; top: 20px; left: 385px;">
            <!-- Container for 5 digits -->
            <div class="flex justify-center items-center h-full">
                <!-- Digit 1 -->
                <div class="seven-segment-digit" id="digit-1">
                    <div class="segment" id="digit-1-a"></div>
                    <div class="segment" id="digit-1-b"></div>
                    <div class="segment" id="digit-1-c"></div>
                    <div class="segment" id="digit-1-d"></div>
                    <div class="segment" id="digit-1-e"></div>
                    <div class="segment" id="digit-1-f"></div>
                    <div class="segment" id="digit-1-g"></div>
                </div>
                <!-- Digit 2 -->
                <div class="seven-segment-digit" id="digit-2">
                    <div class="segment" id="digit-2-a"></div>
                    <div class="segment" id="digit-2-b"></div>
                    <div class="segment" id="digit-2-c"></div>
                    <div class="segment" id="digit-2-d"></div>
                    <div class="segment" id="digit-2-e"></div>
                    <div class="segment" id="digit-2-f"></div>
                    <div class="segment" id="digit-2-g"></div>
                </div>
                <!-- Digit 3 -->
                <div class="seven-segment-digit" id="digit-3">
                    <div class="segment" id="digit-3-a"></div>
                    <div class="segment" id="digit-3-b"></div>
                    <div class="segment" id="digit-3-c"></div>
                    <div class="segment" id="digit-3-d"></div>
                    <div class="segment" id="digit-3-e"></div>
                    <div class="segment" id="digit-3-f"></div>
                    <div class="segment" id="digit-3-g"></div>
                </div>
                <!-- Digit 4 -->
                <div class="seven-segment-digit" id="digit-4">
                    <div class="segment" id="digit-4-a"></div>
                    <div class="segment" id="digit-4-b"></div>
                    <div class="segment" id="digit-4-c"></div>
                    <div class="segment" id="digit-4-d"></div>
                    <div class="segment" id="digit-4-e"></div>
                    <div class="segment" id="digit-4-f"></div>
                    <div class="segment" id="digit-4-g"></div>
                </div>
                <!-- Digit 5 -->
                <div class="seven-segment-digit" id="digit-5">
                    <div class="segment" id="digit-5-a"></div>
                    <div class="segment" id="digit-5-b"></div>
                    <div class="segment" id="digit-5-c"></div>
                    <div class="segment" id="digit-5-d"></div>
                    <div class="segment" id="digit-5-e"></div>
                    <div class="segment" id="digit-5-f"></div>
                    <div class="segment" id="digit-5-g"></div>
                </div>
            </div>
        </div>

        <!-- Scorebox 2 (left) -->
        <div class="absolute bg-gray-100 rounded-lg shadow-md border-4 border-gray-400 flex items-center justify-center"
             style="width: 200px; height: 50px; top: 20px; left: 65px;">
            <!-- Container for 5 digits -->
            <div class="flex justify-center items-center h-full">
                <!-- Digit 6 -->
                <div class="seven-segment-digit" id="digit-6">
                    <div class="segment" id="digit-6-a"></div>
                    <div class="segment" id="digit-6-b"></div>
                    <div class="segment" id="digit-6-c"></div>
                    <div class="segment" id="digit-6-d"></div>
                    <div class="segment" id="digit-6-e"></div>
                    <div class="segment" id="digit-6-f"></div>
                    <div class="segment" id="digit-6-g"></div>
                </div>
                <!-- Digit 7 -->
                <div class="seven-segment-digit" id="digit-7">
                    <div class="segment" id="digit-7-a"></div>
                    <div class="segment" id="digit-7-b"></div>
                    <div class="segment" id="digit-7-c"></div>
                    <div class="segment" id="digit-7-d"></div>
                    <div class="segment" id="digit-7-e"></div>
                    <div class="segment" id="digit-7-f"></div>
                    <div class="segment" id="digit-7-g"></div>
                </div>
                <!-- Digit 8 -->
                <div class="seven-segment-digit" id="digit-8">
                    <div class="segment" id="digit-8-a"></div>
                    <div class="segment" id="digit-8-b"></div>
                    <div class="segment" id="digit-8-c"></div>
                    <div class="segment" id="digit-8-d"></div>
                    <div class="segment" id="digit-8-e"></div>
                    <div class="segment" id="digit-8-f"></div>
                    <div class="segment" id="digit-8-g"></div>
                </div>
                <!-- Digit 9 -->
                <div class="seven-segment-digit" id="digit-9">
                    <div class="segment" id="digit-9-a"></div>
                    <div class="segment" id="digit-9-b"></div>
                    <div class="segment" id="digit-9-c"></div>
                    <div class="segment" id="digit-9-d"></div>
                    <div class="segment" id="digit-9-e"></div>
                    <div class="segment" id="digit-9-f"></div>
                    <div class="segment" id="digit-9-g"></div>
                </div>
                <!-- Digit 10 -->
                <div class="seven-segment-digit" id="digit-10">
                    <div class="segment" id="digit-10-a"></div>
                    <div class="segment" id="digit-10-b"></div>
                    <div class="segment" id="digit-10-c"></div>
                    <div class="segment" id="digit-10-d"></div>
                    <div class="segment" id="digit-10-e"></div>
                    <div class="segment" id="digit-10-f"></div><div class="segment" id="digit-10-g"></div>
                </div>
            </div>
        </div>

        <!-- Container for all 7 rows of small boxes -->
        <div class="
            absolute /* Absolute positioning relative to the large box */
            top-20 /* 80px from the top edge (20 * 4px = 80px) */
            flex
            flex-col /* Stack rows vertically */
            items-center /* Center rows horizontally */
            w-full /* Take full width of the large box */
            overflow-hidden /* Ensure no content overflow */
        ">
            <!-- Row 1 (all boxes) -->
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_2025080473285add5fe3eb02a035e4938ac28be3.jpg" alt="Img 1" onerror="this.src='https://placehold.co/70x70/E0F2F7/2C3E50?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-2">
                    <img src="https://sf-static.upanhlaylink.com/img/image_202508044f2bdf2109e2b73c138ac0654b6103fb.jpg" alt="Img 2" onerror="this.src='https://placehold.co/70x70/FCE4EC/880E4F?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-3">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804028703cfe6061d23208f0c775a815f33.jpg" alt="Img 3" onerror="this.src='https://placehold.co/70x70/FFFDE7/FF6F00?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-4">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804dcc9a8aac743b9d2788a5abd4421e4e1.jpg" alt="Img 4" onerror="this.src='https://placehold.co/70x70/E8F5E9/1B5E20?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-5">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804e74b5209fc57a34cea1c7658583614d3.jpg" alt="Img 5" onerror="this.src='https://placehold.co/70x70/F3E5F5/4A148C?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-6">
                    <img src="https://sf-static.upanhlaylink.com/img/image_202508045c8509c9ecd3460a3f874505a447c467.jpg" alt="Img 6" onerror="this.src='https://placehold.co/70x70/E1F5FE/01579B?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-1-7">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804c479a347beca125b807eb34e958acde4.jpg" alt="Img 7" onerror="this.src='https://placehold.co/70x70/FFEBEE/B71C1C?text=Error'">
                </div>
            </div>
            <!-- Rows 2 to 6 (first and last box have borders, inner ones are empty) -->
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-2-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_2025080486354c7d7a98ca54a81a2cfd544cf294.jpg" alt="Img 8" onerror="this.src='https://placehold.co/70x70/DCEDC8/33691E?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-2-7">
                    <img src="https://placehold.co/70x70/F0F4C3/827717?text=Img+9" alt="Image 9" onerror="this.src='https://placehold.co/70x70/F0F4C3/827717?text=Error'">
                </div>
            </div>
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-3-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804e74b5209fc57a34cea1c7658583614d3.jpg" alt="Img 10" onerror="this.src='https://placehold.co/70x70/FFCCBC/BF360C?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-3-7">
                    <img src="https://placehold.co/70x70/D1C4E9/4527A0?text=Img+11" alt="Image 11" onerror="this.src='https://placehold.co/70x70/D1C4E9/4527A0?text=Error'">
                </div>
            </div>
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-4-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_202508046fb377a98132c53db6e823203cb79d8c.jpg" alt="Img 12" onerror="this.src='https://placehold.co/70x70/B2EBF2/006064?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-4-7">
                    <img src="https://placehold.co/70x70/FFCDD2/C62828?text=Img+13" alt="Image 13" onerror="this.src='https://placehold.co/70x70/FFCDD2/C62828?text=Error'">
                </div>
            </div>
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-5-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804bead03263e897a8552586891bf4ba16a.jpg" alt="Img 14" onerror="this.src='https://placehold.co/70x70/CFD8DC/37474F?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-5-7">
                    <img src="https://placehold.co/70x70/FFE0B2/EF6C00?text=Img+15" alt="Image 15" onerror="this.src='https://placehold.co/70x70/FFE0B2/EF6C00?text=Error'">
                </div>
            </div>
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-6-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_2025080437509603a57e268c1f0685250f09ed7b.jpg" alt="Img 16" onerror="this.src='https://placehold.co/70x70/F8BBD0/AD1457?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent"></div> <!-- Empty space -->
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-6-7">
                    <img src="https://placehold.co/70x70/C8E6C9/2E7D32?text=Img+17" alt="Image 17" onerror="this.src='https://placehold.co/70x70/C8E6C9/2E7D32?text=Error'">
                </div>
            </div>
            <!-- Row 7 (all boxes) -->
            <div class="flex justify-center w-full">
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-1">
                    <img src="https://sf-static.upanhlaylink.com/img/image_20250804c479a347beca125b807eb34e958acde4.jpg" alt="Img 18" onerror="this.src='https://placehold.co/70x70/BBDEFB/1565C0?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-2">
                    <img src="https://placehold.co/70x70/FFECB3/EF6C00?text=Img+19" alt="Image 19" onerror="this.src='https://placehold.co/70x70/FFECB3/EF6C00?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-3">
                    <img src="https://placehold.co/70x70/F3E5F5/6A1B9A?text=Img+20" alt="Image 20" onerror="this.src='https://placehold.co/70x70/F3E5F5/6A1B9A?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-4">
                    <img src="https://placehold.co/70x70/E0F7FA/00838F?text=Img+21" alt="Image 21" onerror="this.src='https://placehold.co/70x70/E0F7FA/00838F?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-5">
                    <img src="https://placehold.co/70x70/FFCCBC/D84315?text=Img+22" alt="Image 22" onerror="this.src='https://placehold.co/70x70/FFCCBC/D84315?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-6">
                    <img src="https://placehold.co/70x70/FBE9E7/A1887F?text=Img+23" alt="Image 23" onerror="this.src='https://placehold.co/70x70/FBE9E7/A1887F?text=Error'">
                </div>
                <div class="w-20 h-20 bg-transparent border-4 border-gray-300 rounded-lg shadow-md overflow-hidden content-box" id="pb-7-7">
                    <img src="https://placehold.co/70x70/E3F2FD/1976D2?text=Img+24" alt="Image 24" onerror="this.src='https://placehold.co/70x70/E3F2FD/1976D2?text=Error'">
                </div>
            </div>
        </div>
        <!-- All mini-boxes with unique IDs and the animated-minibox class -->
        <!-- Top row (1.1 to 1.7) -->
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-1" style="top: 182px; left: 123px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-2" style="top: 182px; left: 157px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-3" style="top: 182px; left: 237px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-4" style="top: 182px; left: 317px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-5" style="top: 182px; left: 397px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-6" style="top: 182px; left: 477px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-1-7" style="top: 182px; left: 511px;"></div>

        <!-- Right column (2.7 to 6.7) -->
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-2-7" style="top: 216px; left: 511px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-3-7" style="top: 296px; left: 511px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-4-7" style="top: 376px; left: 511px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-5-7" style="top: 456px; left: 511px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-6-7" style="top: 536px; left: 511px;"></div>

        <!-- Bottom row (7.7 to 7.1) -->
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-7" style="top: 570px; left: 511px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-6" style="top: 570px; left: 477px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-5" style="top: 570px; left: 397px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-4" style="top: 570px; left: 317px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-3" style="top: 570px; left: 237px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-2" style="top: 570px; left: 157px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-7-1" style="top: 570px; left: 123px;"></div>

        <!-- Left column (6.1 to 2.1) -->
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-6-1" style="top: 536px; left: 123px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-5-1" style="top: 456px; left: 123px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-4-1" style="top: 376px; left: 123px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-3-1" style="top: 296px; left: 123px;"></div>
        <div class="absolute w-4 h-4 rounded-full animated-minibox" id="mb-2-1" style="top: 216px; left: 123px;"></div>

        <!-- Row of 8 imgbox (70x70px) -->
        <div class="absolute flex" style="top: 674px; left: 29px;">
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/E0F2F7/2C3E50?text=Icon+1" alt="Icon 1" onerror="this.src='https://placehold.co/70x70/E0F2F7/2C3E50?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/FCE4EC/880E4F?text=Icon+2" alt="Icon 2" onerror="this.src='https://placehold.co/70x70/FCE4EC/880E4F?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/FFFDE7/FF6F00?text=Icon+3" alt="Icon 3" onerror="this.src='https://placehold.co/70x70/FFFDE7/FF6F00?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/E8F5E9/1B5E20?text=Icon+4" alt="Icon 4" onerror="this.src='https://placehold.co/70x70/E8F5E9/1B5E20?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/F3E5F5/4A148C?text=Icon+5" alt="Icon 5" onerror="this.src='https://placehold.co/70x70/F3E5F5/4A148C?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/E1F5FE/01579B?text=Icon+6" alt="Icon 6" onerror="this.src='https://placehold.co/70x70/E1F5FE/01579B?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/FFEBEE/B71C1C?text=Icon+7" alt="Icon 7" onerror="this.src='https://placehold.co/70x70/FFEBEE/B71C1C?text=Error'">
            </div>
            <div class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 imgbox">
                <img src="https://placehold.co/70x70/DCEDC8/33691E?text=Icon+8" alt="Icon 8" onerror="this.src='https://placehold.co/70x70/DCEDC8/33691E?text=Error'">
            </div>
        </div>

        <!-- New row of 8 betbox (70x50px) -->
        <div class="absolute flex betbox-row" style="top: 746px; left: 29px;">
            <!-- Betbox 1 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-11">
                    <div class="segment" id="digit-11-a"></div><div class="segment" id="digit-11-b"></div><div class="segment" id="digit-11-c"></div><div class="segment" id="digit-11-d"></div><div class="segment" id="digit-11-e"></div><div class="segment" id="digit-11-f"></div><div class="segment" id="digit-11-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-12">
                    <div class="segment" id="digit-12-a"></div><div class="segment" id="digit-12-b"></div><div class="segment" id="digit-12-c"></div><div class="segment" id="digit-12-d"></div><div class="segment" id="digit-12-e"></div><div class="segment" id="digit-12-f"></div><div class="segment" id="digit-12-g"></div>
                </div>
            </div>
            <!-- Betbox 2 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-13">
                    <div class="segment" id="digit-13-a"></div><div class="segment" id="digit-13-b"></div><div class="segment" id="digit-13-c"></div><div class="segment" id="digit-13-d"></div><div class="segment" id="digit-13-e"></div><div class="segment" id="digit-13-f"></div><div class="segment" id="digit-13-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-14">
                    <div class="segment" id="digit-14-a"></div><div class="segment" id="digit-14-b"></div><div class="segment" id="digit-14-c"></div><div class="segment" id="digit-14-d"></div><div class="segment" id="digit-14-e"></div><div class="segment" id="digit-14-f"></div><div class="segment" id="digit-14-g"></div>
                </div>
            </div>
            <!-- Betbox 3 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-15">
                    <div class="segment" id="digit-15-a"></div><div class="segment" id="digit-15-b"></div><div class="segment" id="digit-15-c"></div><div class="segment" id="digit-15-d"></div><div class="segment" id="digit-15-e"></div><div class="segment" id="digit-15-f"></div><div class="segment" id="digit-15-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-16">
                    <div class="segment" id="digit-16-a"></div><div class="segment" id="digit-16-b"></div><div class="segment" id="digit-16-c"></div><div class="segment" id="digit-16-d"></div><div class="segment" id="digit-16-e"></div><div class="segment" id="digit-16-f"></div><div class="segment" id="digit-16-g"></div>
                </div>
            </div>
            <!-- Betbox 4 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-17">
                    <div class="segment" id="digit-17-a"></div><div class="segment" id="digit-17-b"></div><div class="segment" id="digit-17-c"></div><div class="segment" id="digit-17-d"></div><div class="segment" id="digit-17-e"></div><div class="segment" id="digit-17-f"></div><div class="segment" id="digit-17-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-18">
                    <div class="segment" id="digit-18-a"></div><div class="segment" id="digit-18-b"></div><div class="segment" id="digit-18-c"></div><div class="segment" id="digit-18-d"></div><div class="segment" id="digit-18-e"></div><div class="segment" id="digit-18-f"></div><div class="segment" id="digit-18-g"></div>
                </div>
            </div>
            <!-- Betbox 5 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-19">
                    <div class="segment" id="digit-19-a"></div><div class="segment" id="digit-19-b"></div><div class="segment" id="digit-19-c"></div><div class="segment" id="digit-19-d"></div><div class="segment" id="digit-19-e"></div><div class="segment" id="digit-19-f"></div><div class="segment" id="digit-19-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-20">
                    <div class="segment" id="digit-20-a"></div><div class="segment" id="digit-20-b"></div><div class="segment" id="digit-20-c"></div><div class="segment" id="digit-20-d"></div><div class="segment" id="digit-20-e"></div><div class="segment" id="digit-20-f"></div><div class="segment" id="digit-20-g"></div>
                </div>
            </div>
            <!-- Betbox 6 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-21">
                    <div class="segment" id="digit-21-a"></div><div class="segment" id="digit-21-b"></div><div class="segment" id="digit-21-c"></div><div class="segment" id="digit-21-d"></div><div class="segment" id="digit-21-e"></div><div class="segment" id="digit-21-f"></div><div class="segment" id="digit-21-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-22">
                    <div class="segment" id="digit-22-a"></div><div class="segment" id="digit-22-b"></div><div class="segment" id="digit-22-c"></div><div class="segment" id="digit-22-d"></div><div class="segment" id="digit-22-e"></div><div class="segment" id="digit-22-f"></div><div class="segment" id="digit-22-g"></div>
                </div>
            </div>
            <!-- Betbox 7 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-23">
                    <div class="segment" id="digit-23-a"></div><div class="segment" id="digit-23-b"></div><div class="segment" id="digit-23-c"></div><div class="segment" id="digit-23-d"></div><div class="segment" id="digit-23-e"></div><div class="segment" id="digit-23-f"></div><div class="segment" id="digit-23-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-24">
                    <div class="segment" id="digit-24-a"></div><div class="segment" id="digit-24-b"></div><div class="segment" id="digit-24-c"></div><div class="segment" id="digit-24-d"></div><div class="segment" id="digit-24-e"></div><div class="segment" id="digit-24-f"></div><div class="segment" id="digit-24-g"></div>
                </div>
            </div>
            <!-- Betbox 8 -->
            <div class="w-[70px] h-[50px] bg-gray-100 border-2 border-gray-400 rounded-lg shadow-md m-0.5 flex items-center justify-center betbox">
                <div class="seven-segment-digit" id="digit-25">
                    <div class="segment" id="digit-25-a"></div><div class="segment" id="digit-25-b"></div><div class="segment" id="digit-25-c"></div><div class="segment" id="digit-25-d"></div><div class="segment" id="digit-25-e"></div><div class="segment" id="digit-25-f"></div><div class="segment" id="digit-25-g"></div>
                </div>
                <div class="seven-segment-digit" id="digit-26">
                    <div class="segment" id="digit-26-a"></div><div class="segment" id="digit-26-b"></div><div class="segment" id="digit-26-c"></div><div class="segment" id="digit-26-d"></div><div class="segment" id="digit-26-e"></div><div class="segment" id="digit-26-f"></div><div class="segment" id="digit-26-g"></div>
                </div>
            </div>
        </div>

        <!-- New row of 8 circular boxes (70x70px) -->
        <div class="absolute flex" style="top: 850px; left: 41px;">
            <div id="circlebox-1" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-2" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-3" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-4" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-5" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-6" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-7" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
            <div id="circlebox-8" class="w-[70px] h-[70px] bg-gray-100 border-2 border-gray-400 rounded-full shadow-md m-0.5 circlebox"></div>
        </div>


        <!-- Control buttons -->
        <div class="absolute bottom-6 flex space-x-4">
            <button id="startButton" class="px-6 py-2 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition duration-300 ease-in-out transform hover:scale-105">
                Bắt đầu
            </button>
        </div>
    </div>

    <script>
        let animationInterval; // Stores the ID for the main animation interval
        let autoStopTimeout;   // Stores the ID for the auto-stop timer
        let currentLedIndex = 0; // Tracks the currently active LED
        let miniBoxes = [];      // Array to store mini-box DOM elements
        let animationStartTime;  // Timestamp when the animation started

        // Define the order of mini-boxes for the animation path (clockwise perimeter)
        const animationPathIds = [
            'mb-1-1', 'mb-1-2', 'mb-1-3', 'mb-1-4', 'mb-1-5', 'mb-1-6', 'mb-1-7',
            'mb-2-7', 'mb-3-7', 'mb-4-7', 'mb-5-7', 'mb-6-7',
            'mb-7-7', 'mb-7-6', 'mb-7-5', 'mb-7-4', 'mb-7-3', 'mb-7-2', 'mb-7-1',
            'mb-6-1', 'mb-5-1', 'mb-4-1', 'mb-3-1', 'mb-2-1'
        ];

        const SLOW_SPEED = 200; // Milliseconds for the slowest phase animation speed
        const FAST_SPEED = 50;  // Milliseconds for the fastest phase animation speed
        const VERY_SLOW_SPEED = 400; // Speed for the 'very slow' phase

        const SPEED_UP_DURATION = 1500; // Duration in milliseconds for the slow-to-fast transition
        const SLOW_DOWN_DURATION = 2000; // Duration in milliseconds for the fast-to-slow transition
        const VERY_SLOW_PHASE_DURATION = 3000; // New duration for the very slow phase (3 seconds)

        // Updated total animation duration range
        const MIN_TOTAL_DURATION = 10000; // Minimum total animation duration (10 seconds)
        const MAX_TOTAL_DURATION = 13000; // Maximum total animation duration (13 seconds)

        const TRAIL_COUNT = 2; // Number of trailing LEDs (excluding the head LED)

        // Define segment patterns for each digit (0-9)
        const digitPatterns = {
            0: ['a', 'b', 'c', 'd', 'e', 'f'],
            1: ['b', 'c'],
            2: ['a', 'b', 'g', 'e', 'd'],
            3: ['a', 'b', 'g', 'c', 'd'],
            4: ['f', 'g', 'b', 'c'],
            5: ['a', 'f', 'g', 'c', 'd'],
            6: ['a', 'f', 'g', 'e', 'c', 'd'],
            7: ['a', 'b', 'c'],
            8: ['a', 'b', 'c', 'd', 'e', 'f', 'g'],
            9: ['a', 'b', 'c', 'd', 'f', 'g']
        };

        // Arrays to hold digit IDs for scoreboxes and betboxes
        const scorebox1DigitIds = ['digit-1', 'digit-2', 'digit-3', 'digit-4', 'digit-5'];
        const scorebox2DigitIds = ['digit-6', 'digit-7', 'digit-8', 'digit-9', 'digit-10'];
        const betboxDigitIdGroups = [
            ['digit-11', 'digit-12'], ['digit-13', 'digit-14'], ['digit-15', 'digit-16'], ['digit-17', 'digit-18'],
            ['digit-19', 'digit-20'], ['digit-21', 'digit-22'], ['digit-23', 'digit-24'], ['digit-25', 'digit-26']
        ];

        // Array to store current numeric values for each betbox
        let betboxCurrentValues = new Array(betboxDigitIdGroups.length).fill(0);

        /**
         * Initializes the mini-box elements and ensures they start with the default red color.
         */
        function initializeMiniBoxes() {
            // Map the IDs from animationPathIds to actual DOM elements
            miniBoxes = animationPathIds.map(id => document.getElementById(id));
            // Reset all mini-boxes to their default state (transparent with red border)
            miniBoxes.forEach(box => {
                if (box) {
                    box.classList.remove('active'); // Remove active class
                    box.style.backgroundColor = 'transparent'; // Set background to transparent
                    box.style.borderColor = '#f87171'; // Set border color to light red
                }
            });
        }

        /**
         * Updates a single 7-segment digit display.
         * @param {HTMLElement} digitElement - The container element for the digit.
         * @param {number} number - The digit to display (0-9).
         */
        function displaySingleDigit(digitElement, number) {
            const segments = ['a', 'b', 'c', 'd', 'e', 'f', 'g'];
            // Turn off all segments first
            segments.forEach(segmentId => {
                const segment = digitElement.querySelector(`#${digitElement.id}-${segmentId}`);
                if (segment) {
                    segment.classList.remove('on');
                }
            });

            // Turn on segments for the given number
            const pattern = digitPatterns[number];
            if (pattern) {
                pattern.forEach(segmentId => {
                    const segment = digitElement.querySelector(`#${digitElement.id}-${segmentId}`);
                    if (segment) {
                        segment.classList.add('on');
                    }
                });
            }
        }

        /**
         * Displays a number across multiple 7-segment digits.
         * @param {number} number - The number to display.
         * @param {Array<string>} digitElementIds - An array of IDs for the digit container elements.
         */
        function displayNumber(number, digitElementIds) {
            const numDigits = digitElementIds.length;
            const numString = String(number).padStart(numDigits, '0'); // Pad with leading zeros

            for (let i = 0; i < numDigits; i++) {
                const digit = parseInt(numString[i], 10);
                const digitElement = document.getElementById(digitElementIds[i]);
                if (digitElement) {
                    displaySingleDigit(digitElement, digit);
                }
            }
        }

        /**
         * Animates a single step of the LED sequence.
         * @param {boolean} isTrailing - True if trailing LEDs should be shown (during fast phase).
         */
        function animateStep(isTrailing) {
            // Turn off all LEDs first to ensure a clean state for the current frame
            miniBoxes.forEach(box => {
                if (box) {
                    box.classList.remove('active');
                    box.style.backgroundColor = 'transparent'; // Reset to transparent
                    box.style.borderColor = '#f87171'; // Reset border to light red
                }
            });

            // Move to the next LED in the sequence, wrapping around if at the end
            currentLedIndex = (currentLedIndex + 1) % miniBoxes.length;

            // Turn on the current LED (the "head" of the light trail)
            if (miniBoxes[currentLedIndex]) {
                miniBoxes[currentLedIndex].classList.add('active');
                miniBoxes[currentLedIndex].style.backgroundColor = '#dc2626'; // Set background to red
                miniBoxes[currentLedIndex].style.borderColor = '#dc2626'; // Set border to red
            }

            // If trailing is enabled, turn on the trailing LEDs
            if (isTrailing) {
                for (let i = 0; i < TRAIL_COUNT; i++) {
                    const trailLedIndex = (currentLedIndex - (i + 1) + miniBoxes.length) % miniBoxes.length;
                    if (miniBoxes[trailLedIndex]) {
                        miniBoxes[trailLedIndex].classList.add('active');
                        miniBoxes[trailLedIndex].style.backgroundColor = '#dc2626'; // Set background to red
                        miniBoxes[trailLedIndex].style.borderColor = '#dc2626'; // Set border to red
                    }
                }
            }
        }

        /**
         * Starts the LED animation.
         * It progresses through a slow start, fast run with trailing LEDs,
         * a slow-down phase, and finally stops automatically with one LED lit.
         */
        function startLedAnimation() {
            // Clear any existing animation/timers to prevent conflicts
            clearInterval(animationInterval);
            clearTimeout(autoStopTimeout);

            initializeMiniBoxes(); // Reset all perimeter boxes to their initial state (red, not active)
            
            // Reset all scoreboxes and betboxes to 00000/00
            displayNumber(0, scorebox1DigitIds);
            displayNumber(0, scorebox2DigitIds);
            betboxCurrentValues.fill(0); // Reset all betbox values to 0
            betboxDigitIdGroups.forEach((group, index) => displayNumber(betboxCurrentValues[index], group));


            currentLedIndex = 0; // Start animation from the first LED
            animationStartTime = Date.now(); // Record the precise start time

            // Determine the total animation duration randomly (10-13 seconds)
            const totalAnimationDuration = Math.random() * (MAX_TOTAL_DURATION - MIN_TOTAL_DURATION) + MIN_TOTAL_DURATION;

            // Calculate when each phase should begin
            const slowDownPhaseStart = totalAnimationDuration - VERY_SLOW_PHASE_DURATION - SLOW_DOWN_DURATION;
            const verySlowPhaseStart = totalAnimationDuration - VERY_SLOW_PHASE_DURATION;

            // Main animation loop function
            function loop() {
                const elapsed = Date.now() - animationStartTime; // Time elapsed since animation started
                let delay; // Current delay for the next animation step
                let showTrailing = false; // Flag to control trailing LEDs

                if (elapsed < SPEED_UP_DURATION) {
                    // Phase 1: Initial slow start
                    delay = SLOW_SPEED;
                } else if (elapsed < slowDownPhaseStart) {
                    // Phase 2: Fast run with trailing LEDs
                    delay = FAST_SPEED;
                    showTrailing = true; // Enable trailing LEDs
                } else if (elapsed < verySlowPhaseStart) {
                    // Phase 3: Slow down before very slow phase
                    const progress = (elapsed - slowDownPhaseStart) / SLOW_DOWN_DURATION; // Progress (0 to 1) through slow-down phase
                    delay = FAST_SPEED + (VERY_SLOW_SPEED - FAST_SPEED) * progress; // Linear interpolation for delay
                    showTrailing = false; // Disable trailing LEDs during slow down
                } else if (elapsed < totalAnimationDuration) {
                    // Phase 4: Very slow phase (new)
                    delay = VERY_SLOW_SPEED;
                    showTrailing = false;
                } else {
                    // This block acts as a safety net, but the main stop is handled by autoStopTimeout
                    clearInterval(animationInterval);
                    // Ensure only the final LED is lit
                    miniBoxes.forEach(box => {
                        if (box) {
                            box.classList.remove('active');
                            box.style.backgroundColor = 'transparent';
                            box.style.borderColor = '#f87171';
                        }
                    });
                    if (miniBoxes[currentLedIndex]) {
                        miniBoxes[currentLedIndex].classList.add('active');
                        miniBoxes[currentLedIndex].style.backgroundColor = '#dc2626';
                        miniBoxes[currentLedIndex].style.borderColor = '#dc2626';
                    }
                    currentLedIndex = 0; // Reset index for next start
                    return; // Exit the loop
                }

                // Perform the animation step with the calculated trailing flag
                animateStep(showTrailing);
                // Schedule the next animation step with the calculated delay
                animationInterval = setTimeout(loop, delay);
            }

            // Start the first animation loop with the initial slow speed
            animationInterval = setTimeout(loop, SLOW_SPEED);

            // Set the auto-stop timeout for the total animation duration
            autoStopTimeout = setTimeout(() => {
                clearInterval(animationInterval); // Stop the animation loop at the end of total duration

                // Turn off all perimeter LEDs first to ensure only the final one remains lit
                miniBoxes.forEach(box => {
                    if (box) {
                        box.classList.remove('active');
                        box.style.backgroundColor = 'transparent';
                        box.style.borderColor = '#f87171';
                    }
                });

                // Turn on only the LED at the final currentLedIndex
                if (miniBoxes[currentLedIndex]) {
                    miniBoxes[currentLedIndex].classList.add('active');
                    miniBoxes[currentLedIndex].style.backgroundColor = '#dc2626';
                    miniBoxes[currentLedIndex].style.borderColor = '#dc2626';
                }

                // Display a random number on Scorebox 1 (0-99999)
                const randomNumber1 = Math.floor(Math.random() * 100000);
                displayNumber(randomNumber1, scorebox1DigitIds);

                // Display a random number on Scorebox 2 (0-99999)
                const randomNumber2 = Math.floor(Math.random() * 100000);
                displayNumber(randomNumber2, scorebox2DigitIds);

                // Display random numbers on all betboxes (0-99)
                betboxDigitIdGroups.forEach((group, index) => {
                    const randomBetNumber = Math.floor(Math.random() * 100); // For two digits (0-99)
                    betboxCurrentValues[index] = randomBetNumber; // Update stored value
                    displayNumber(randomBetNumber, group);
                });

                currentLedIndex = 0; // Reset index for next start
            }, totalAnimationDuration);
        }

        // Event listener for the "Bắt đầu" button
        document.getElementById('startButton').addEventListener('click', startLedAnimation);

        // Initialize mini-boxes and display initial scores when the page loads
        window.onload = function() {
            initializeMiniBoxes();
            displayNumber(0, scorebox1DigitIds); // Display "00000" initially for Scorebox 1
            displayNumber(0, scorebox2DigitIds); // Display "00000" initially for Scorebox 2
            betboxDigitIdGroups.forEach((group, index) => displayNumber(betboxCurrentValues[index], group)); // Display "00" initially for all betboxes

            // Add click listeners to circular bet buttons
            const circleboxElements = document.querySelectorAll('.circlebox');
            circleboxElements.forEach((circlebox, index) => {
                circlebox.addEventListener('click', () => {
                    // Increment the value for the corresponding betbox
                    betboxCurrentValues[index] = (betboxCurrentValues[index] + 1) % 100; // Increment and wrap around 99
                    // Update the display of the corresponding betbox
                    displayNumber(betboxCurrentValues[index], betboxDigitIdGroups[index]);
                });
            });
        };
    </script>
</body>
</html>
